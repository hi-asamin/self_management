# S3/CloudFrontについて
## インフラ設計における重要ポイント
### 可用性
* サービスを継続的に利用できるか
稼働率、目標復旧時間、災害対策

### 性能・拡張性
* システムの性能が十分で、将来においても拡張しやすいか
性能目標、拡張性

### 運用・保守性
* 運用と保守がしやすいか
運用時間、バックアップ、運用監視、メンテナンス

### セキュリティ
* 情報が安全に守られるているか
資産の公開範囲、ガイドライン、情報漏洩の対策

### 移行性
* 現行システムを他のシステムに移行しやすくなっているか
移行方式の規定、設備・データ移行スケジュール

## 画像の保存場所をwebサーバではなくS3にする理由
* webサーバのストレージが画像で一杯になるのを防ぐ
* HTMLへのアクセスと画像へのアクセスを分けることで負荷分散する
* サーバの台数を増やしやすくする
> webサーバ常に画像が保存さあれていると、webサーバの台数を増やした時に、画像を同期する必要があり、スケールアウトが難しい
* コンテンツ配信サービスから配信することで、画像配信を高速化できる

## S3について
### 特徴
* 安い、耐久性
* 容量無制限、1ファイル最大5TBまで
* バケットやオブジェクトに対してアクセス制御を設定できる

### 重要概念
* バケット
オブジェクトの保存場所。名前はグローバルでユニークな必要あり
* オブジェクト
1. データ本体。S3に格納されるファイルで、URLが付与される
2. バケット内オブジェクト数は無制限
* キー
オブジェクトの格納URLパス

## S3のよくある利用シーン
* 静的コンテンツの配信
img画像はS3から配信する
* バッチ連携用のファイル置き場
S3にCSVファイルなどを置いて、バッチでそのファイルを参照して処理を行う
* ログなどの出力先
定期的にS3にログを送る
* 静的ウェブホスティング
静的なウェブサイト（ランティングページなど）をS3から公開する

## CloudFrontについて
### 概要
* CDN：Content Delivery Network
* オリジンサーバ（元となる画像を配信するサーバ）上にあるコンテンツを、世界中100箇所以上にあるエッジロケーションにコピーしてそこから配信を行う

### 特徴
* 高速：ユーザから最も近いエッジサーバから画像を配信する
* 効率的：エッジサーバでコンテンツのキャッシングを行うので、オリジンサーバに負荷をかけずに配信できる

### スパーリロード
* ブラウザに残されているキャッシュを削除してリロードする（初回アクセスと同様になる）
* windows: shift f5
* mac: control shift r
